apiVersion: v1
kind: Pod
metadata:
  labels:
    app: nginx
    cdk8s.io/metadata.addr: my-chart-my-pod-c8d79087
  name: my-nginx-pod
  namespace: default
spec:
  automountServiceAccountToken: false
  containers:
    - image: nginx:latest
      imagePullPolicy: Always
      name: main
      resources:
        limits:
          cpu: 1500m
          memory: 2048Mi
        requests:
          cpu: 1000m
          memory: 512Mi
      securityContext:
        allowPrivilegeEscalation: false
        privileged: false
        readOnlyRootFilesystem: false
        runAsNonRoot: true
      volumeMounts:
        - mountPath: /var/cache/nginx
          name: nginx-cache-volume
        - mountPath: /var/run
          name: nginx-run-volume
  dnsPolicy: ClusterFirst
  hostNetwork: false
  restartPolicy: Always
  securityContext:
    fsGroup: 101
    fsGroupChangePolicy: Always
    runAsGroup: 101
    runAsNonRoot: true
    runAsUser: 101
  setHostnameAsFQDN: false
  terminationGracePeriodSeconds: 30
  volumes:
    - emptyDir: {}
      name: nginx-cache-volume
    - emptyDir: {}
      name: nginx-run-volume
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: nginx
  name: nginx-service
  namespace: default
spec:
  externalIPs: []
  ports:
    - port: 80
      targetPort: 80
  selector: {}
  type: LoadBalancer
